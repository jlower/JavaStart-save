<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>反射应用二：获取运行时类的完整结构.html</title>
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
body {
  margin: 15px 23px 15px 23px;
  background-color: #ffffff;
}
/* ========== Text Styles ========== */
hr { color: #000000}
body, table, span.rvts0 /* Normal text */
{
 font-size: 9pt;
 font-family: '宋体';
 font-style: normal;
 font-weight: normal;
 color: #000000;
 text-decoration: none;
}
a.rvts1, span.rvts1 /* Hyperlink */
{
 color: #0000ff;
 text-decoration: underline;
}
span.rvts2
{
 font-size: 15pt;
 font-family: 'Consolas';
 color: #000000;
}
span.rvts3
{
 font-size: 15pt;
 color: #000000;
}
span.rvts4
{
 font-size: 15pt;
 font-weight: bold;
 color: #000000;
}
span.rvts5
{
 font-size: 15pt;
 font-family: 'Consolas';
 color: #808000;
}
span.rvts6
{
 font-size: 15pt;
 font-family: 'Consolas';
 font-weight: bold;
 color: #000080;
}
span.rvts7
{
 font-size: 15pt;
 font-family: 'Consolas';
 font-style: italic;
 color: #008017;
}
span.rvts8
{
 font-size: 15pt;
 font-family: '??';
 font-style: italic;
 color: #008017;
}
span.rvts9
{
 font-size: 15pt;
 font-family: 'Consolas';
 font-style: italic;
 font-weight: bold;
 color: #660e7a;
}
span.rvts10
{
 font-size: 15pt;
 font-family: 'Consolas';
 color: #0000ff;
}
span.rvts11
{
 font-size: 15pt;
 font-family: '??';
 font-style: italic;
 color: #008017;
 background-color: #ffff00;
}
span.rvts12
{
 font-size: 12pt;
 font-weight: bold;
 color: #000000;
}
/* ========== Para Styles ========== */
p,ul,ol /* Paragraph Style */
{
 text-align: left;
 text-indent: 0px;
 padding: 0px 0px 0px 0px;
 margin: 0px 0px 0px 0px;
}
.rvps1 /* Centered */
{
 text-align: center;
}
.rvps2
{
 line-height: 1.50;
 margin: 5px 0px 5px 0px;
}
.rvps3
{
 background: #ffffff;
}
.rvps4
{
 text-align: center;
 line-height: 1.50;
 margin: 5px 0px 5px 0px;
}
/* ========== Lists ========== */
.list0 {text-indent: 0px; margin-left: 84px; list-style-position: outside;}
--></style>
</head>
<body>
<p class=rvps4><span class=rvts12>&#21453;&#23556;&#24212;&#29992;&#20108;&#65306;&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#30340;&#23436;&#25972;&#32467;&#26500;</span></p>
<p class=rvps2><span class=rvts12><br></span></p>
<p class=rvps2><span class=rvts3>&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#21453;&#23556;&#65292;&#33719;&#21462;&#23545;&#24212;&#30340;&#36816;&#34892;&#26102;&#31867;&#20013;&#25152;&#26377;&#30340;&#23646;&#24615;&#12289;&#26041;&#27861;&#12289;&#26500;&#36896;&#22120;&#12289;&#29238;&#31867;&#12289;&#25509;&#21475;&#12289;&#29238;&#31867;&#30340;&#27867;&#22411;&#12289;&#21253;&#12289;&#27880;&#35299;&#12289;&#24322;&#24120;&#31561;&#12290;&#12290;&#12290;&#12290;</span></p>
<p class=rvps2><span class=rvts4>&#20856;&#22411;&#20195;&#30721;&#65306;</span></p>
<p class=rvps3><span class=rvts5>@Test</span><br><span class=rvts6>public void </span><span class=rvts2>test1(){</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>//</span><span class=rvts8>&#33719;&#21462;&#23646;&#24615;&#32467;&#26500;</span><br><span class=rvts8> &nbsp; &nbsp;</span><span class=rvts7>//getFields():</span><span class=rvts8>&#33719;&#21462;&#24403;&#21069;&#36816;&#34892;&#26102;&#31867;&#21450;&#20854;&#29238;&#31867;&#20013;&#22768;&#26126;&#20026;</span><span class=rvts7>public</span><span class=rvts8>&#35775;&#38382;&#26435;&#38480;&#30340;&#23646;&#24615;</span><br><span class=rvts8> &nbsp; &nbsp;</span><span class=rvts2>Field[] fields = clazz.getFields();</span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Field f : fields){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(f);</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2> &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println();</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>//getDeclaredFields():</span><span class=rvts8>&#33719;&#21462;&#24403;&#21069;&#36816;&#34892;&#26102;&#31867;&#20013;&#22768;&#26126;&#30340;&#25152;&#23646;&#24615;&#12290;&#65288;&#19981;&#21253;&#21547;&#29238;&#31867;&#20013;&#22768;&#26126;&#30340;&#23646;&#24615;</span><br><span class=rvts8> &nbsp; &nbsp;</span><span class=rvts2>Field[] declaredFields = clazz.getDeclaredFields();</span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Field f : declaredFields){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(f);</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2>}</span></p>
<p class=rvps3><span class=rvts2><br></span></p>
<p class=rvps3><span class=rvts5>@Test</span><br><span class=rvts6>public void </span><span class=rvts2>test1(){</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>//getMethods():</span><span class=rvts8>&#33719;&#21462;&#24403;&#21069;&#36816;&#34892;&#26102;&#31867;&#21450;&#20854;&#25152;&#29238;&#31867;&#20013;&#22768;&#26126;&#20026;</span><span class=rvts7>public</span><span class=rvts8>&#26435;&#38480;&#30340;&#26041;&#27861;</span><br><span class=rvts8> &nbsp; &nbsp;</span><span class=rvts2>Method[] methods = clazz.getMethods();</span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Method m : methods){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(m);</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2> &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println();</span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>//getDeclaredMethods():</span><span class=rvts8>&#33719;&#21462;&#24403;&#21069;&#36816;&#34892;&#26102;&#31867;&#20013;&#22768;&#26126;&#30340;&#25152;&#26041;&#27861;&#12290;&#65288;&#19981;&#21253;&#21547;&#29238;&#31867;&#20013;&#22768;&#26126;&#30340;&#26041;&#27861;</span><br><span class=rvts8> &nbsp; &nbsp;</span><span class=rvts2>Method[] declaredMethods = clazz.getDeclaredMethods();</span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Method m : declaredMethods){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(m);</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2>}</span></p>
<p class=rvps3><span class=rvts2><br></span></p>
<p class=rvps3><span class=rvts7>/*</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts8>&#33719;&#21462;&#26500;&#36896;&#22120;&#32467;&#26500;</span><br><span class=rvts7></span><br><span class=rvts7> &nbsp; &nbsp; */</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts5>@Test</span><br><span class=rvts5> &nbsp; &nbsp;</span><span class=rvts6>public void </span><span class=rvts2>test1(){</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts7>//getConstructors():</span><span class=rvts8>&#33719;&#21462;&#24403;&#21069;&#36816;&#34892;&#26102;&#31867;&#20013;&#22768;&#26126;&#20026;</span><span class=rvts7>public</span><span class=rvts8>&#30340;&#26500;&#36896;&#22120;</span><br><span class=rvts8> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts2>Constructor[] constructors = clazz.getConstructors();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Constructor c : constructors){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(c);</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts7>//getDeclaredConstructors():</span><span class=rvts8>&#33719;&#21462;&#24403;&#21069;&#36816;&#34892;&#26102;&#31867;&#20013;&#22768;&#26126;&#30340;&#25152;&#30340;&#26500;&#36896;&#22120;</span><br><span class=rvts8> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts2>Constructor[] declaredConstructors = clazz.getDeclaredConstructors();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Constructor c : declaredConstructors){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(c);</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>/*</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts8>&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#30340;&#29238;&#31867;</span><br><span class=rvts7></span><br><span class=rvts7> &nbsp; &nbsp; */</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts5>@Test</span><br><span class=rvts5> &nbsp; &nbsp;</span><span class=rvts6>public void </span><span class=rvts2>test2(){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class superclass = clazz.getSuperclass();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(superclass);</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>/*</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts8>&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#30340;&#24102;&#27867;&#22411;&#30340;&#29238;&#31867;</span><br><span class=rvts7></span><br><span class=rvts7> &nbsp; &nbsp; */</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts5>@Test</span><br><span class=rvts5> &nbsp; &nbsp;</span><span class=rvts6>public void </span><span class=rvts2>test3(){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Type genericSuperclass = clazz.getGenericSuperclass();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(genericSuperclass);</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>/*</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts11>&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#30340;&#24102;&#27867;&#22411;&#30340;&#29238;&#31867;&#30340;&#27867;&#22411;</span><br><span class=rvts8></span><br><span class=rvts8> &nbsp; &nbsp;&#20195;&#30721;&#65306;&#36923;&#36753;&#24615;&#20195;&#30721;</span><span class=rvts7> &nbsp;vs </span><span class=rvts8>&#21151;&#33021;&#24615;&#20195;&#30721;</span><br><span class=rvts7> &nbsp; &nbsp; */</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts5>@Test</span><br><span class=rvts5> &nbsp; &nbsp;</span><span class=rvts6>public void </span><span class=rvts2>test4(){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Type genericSuperclass = clazz.getGenericSuperclass();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;ParameterizedType paramType = (ParameterizedType) genericSuperclass;</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts7>//</span><span class=rvts8>&#33719;&#21462;&#27867;&#22411;&#31867;&#22411;</span><br><span class=rvts8> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts2>Type[] actualTypeArguments = paramType.getActualTypeArguments();</span><br><span class=rvts7>// &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(actualTypeArguments[0].getTypeName());</span><br><span class=rvts7> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts2>System.</span><span class=rvts9>out</span><span class=rvts2>.println(((Class)actualTypeArguments[</span><span class=rvts10>0</span><span class=rvts2>]).getName());</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>/*</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts11>&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#23454;&#29616;&#30340;&#25509;&#21475;</span><br><span class=rvts7> &nbsp; &nbsp; */</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts5>@Test</span><br><span class=rvts5> &nbsp; &nbsp;</span><span class=rvts6>public void </span><span class=rvts2>test5(){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class[] interfaces = clazz.getInterfaces();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Class c : interfaces){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(c);</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts7>//</span><span class=rvts8>&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#30340;&#29238;&#31867;&#23454;&#29616;&#30340;&#25509;&#21475;</span><br><span class=rvts8> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts2>Class[] interfaces1 = clazz.getSuperclass().getInterfaces();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Class c : interfaces1){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(c);</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>/*</span><br><span class=rvts7> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts8>&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#25152;&#22312;&#30340;&#21253;</span><br><span class=rvts7></span><br><span class=rvts7> &nbsp; &nbsp; */</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts5>@Test</span><br><span class=rvts5> &nbsp; &nbsp;</span><span class=rvts6>public void </span><span class=rvts2>test6(){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Package pack = clazz.getPackage();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(pack);</span><br><span class=rvts2> &nbsp; &nbsp;}</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp;</span><span class=rvts7>/*</span><br><span class=rvts7> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts8>&#33719;&#21462;&#36816;&#34892;&#26102;&#31867;&#22768;&#26126;&#30340;&#27880;&#35299;</span><br><span class=rvts7></span><br><span class=rvts7> &nbsp; &nbsp; */</span><br><span class=rvts7> &nbsp; &nbsp;</span><span class=rvts5>@Test</span><br><span class=rvts5> &nbsp; &nbsp;</span><span class=rvts6>public void </span><span class=rvts2>test7(){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Class clazz = Person.</span><span class=rvts6>class</span><span class=rvts2>;</span><br><span class=rvts2></span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;Annotation[] annotations = clazz.getAnnotations();</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=rvts6>for</span><span class=rvts2>(Annotation annos : annotations){</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span class=rvts9>out</span><span class=rvts2>.println(annos);</span><br><span class=rvts2> &nbsp; &nbsp; &nbsp; &nbsp;}</span><br><span class=rvts2> &nbsp; &nbsp;}</span></p>
</body></html>
